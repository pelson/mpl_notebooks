$(document).ready(function(){function e(e){e.removeClass("selected")}function t(){s=[],$(".tag.selected").each(function(){s.push($(this).text().toLowerCase())})}function o(e,t){for(var o=0;o<e.length;o++)for(var n=0;n<t.length;n++)if(e[o]===t[n])return!0;return!1}function n(){$(".notebooks").each(function(){var e=$(this);$(".notebook").each(function(){for(var t=$(this),o=t.data("keywords"),n=!0,a=0;a<s.length;a++){for(var i=s[a],c=!1,l=0;l<o.length;l++)i===o[l]&&(c=!0);c||(n=!1,a=s.length)}0===s.length||n?(t.removeClass("hide"),e.masonry("layout")):n||(t.addClass("hide"),e.masonry("layout"))}),0===e.children(":not(.hide)").length&&e.prev().hide()})}var s=[];$(".tag").click(function(){$(this).hasClass("selected")?($(this).removeClass("selected"),t()):($(this).addClass("selected"),s.push($(this).text().toLowerCase())),console.log(s),n()}),$("#clear").click(function(){s=[],$(".tag.selected").each(function(){e($(this))})})}),$(window).load(function(){var e=$(".notebooks");e.masonry({itemSelector:".notebook",isFitWidth:!0})});